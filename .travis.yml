language: node_js
node_js:
- '0.10'
- '0.12'
branches:
  except:
  - latest
  - production
  - /^v[0-9]\.[0-9]\.[0-9]$/
before_script:
- npm install -g grunt-cli
- ./create_config.sh
script:
- npm test
- node lib/run --projectKey ${SPHERE_PROJECT_KEY} --clientId ${SPHERE_CLIENT_ID} --clientSecret ${SPHERE_CLIENT_SECRET}
env:
  global:
  - secure: rT3ftSKiNflMmqFpbY3oFMmXVBPudWGD4ZS1ZiTGVZtInSfmSjOWrYejTut6fq6ZKFNeWvQ5HssyJ3KupOUBZjJlJi8lFPaOEltq5ZwtrWv8Pf3eiOhAbHv7osecNA9D1IPSj4BZhihsfAezSXusi37kYeWXB+wIeFmkh1JsY8A=
  - secure: GY9rDdGSt4NkLahzgBjEQZ4pgmOp9NIhFxM2k1Nn7qTygXpqcsWYCmD87sgG8j1oeeUArJZkeLji2DPbWte6YN9U/7SdvAcDxe+/D8pEf7DwvLQ3817CwGgpy+3AoiR2BQR9mHWJL9ct5o6X7ADckasIbyj0tp1dtGKjG21KTOw=
  - secure: qjum/AqVqjcgsn9G1sbaJ34n6EKoZPV7GWPNyc0FHcsqxuLxdXhR74tA98lJALXudKNrcIf3/K/9QfeqOvilOr9dI/u6tjVsMoaBp3djtfdU6Ys8ojZcun8BpBJGsPbEtkhazjtVqvMGVccJStxBfX0IgcJi+qnHNMUh4NFRvds=
sudo: false
